{% include 'client_header.html' %}
  <div class="col-12 page-heading">
    <div class="page-title-box d-sm-flex align-items-center justify-content-between">
      <h4 class="mb-sm-0">Client Details</h4>
      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item"> <a href="{% url 'client_dashboard' %}">Dashboard</a> </li>
          <li class="breadcrumb-item active">Client Details</li>
        </ol>
      </div>
    </div>
  </div>
  <!-- page-heading -->
  </div>
  <!-- row end -->
  <div class="card admin-details card-bgchange">
    <div class="card-header align-items-center d-flex">
      <h4 class="card-title mb-0 flex-grow-1">Client Details</h4>
      <button type="button" data-toggle="modal" data-target="#addcustomer" class="btn btn-primary bttn-editcode "> <a href="#">Add New Customer</a><i class="fal fa-plus"></i></button>
    </div>
    <div class="card-body">
      <table class="table table-hover dt-responsive" id="clientdeatils">
        <thead>
          <tr>
<!--            <th>#</th>-->
            <th>Name</th>
            <th>Email</th>
            <th>Contact</th>
            <th>State</th>
            <th>Group</th>
            <th>Action</th>
          </tr>
        </thead>
        {% for emails in messages %}
            {% if emails.user_id == user.id %}
        <tbody>
          <tr>
<!--            <td class="sorting_1">1</td>-->
            <td>{{emails.name}}</td>
            <td>{{emails.email}}</td>
            <td>{{emails.mobile}}</td>
            <td>{{emails.state}}</td>
            <td>{{ emails.checks }}</td>
            <td>
              <div class="btn-group btn-group-sm">
                <button type="button" data-toggle="modal" data-target="#edit" class="btn btn-sm btn-success" onclick="email({{emails.id}})"> <i class="fal fa-edit"></i> </button>
                <button type="button" class="btn btn-sm btn-danger delete-msg" onclick="test({{emails.id}})"> <i class="fa fa-trash"></i> </button>
              </div>
            </td>
          </tr>
<!--          <tr class="even">-->
<!--            <td class="sorting_1">2</td>-->
<!--            <td>Charde Marshall </td>-->
<!--            <td>adrissell0@edubl.org</td>-->
<!--            <td>000 0000 000</td>-->
<!--            <td>Selangor</td>-->
<!--            <td>Group3, Group4</td>-->
<!--            <td>-->
<!--              <div class="btn-group btn-group-sm">-->
<!--                <button type="button" data-toggle="modal" data-target="#edit" class="btn btn-sm btn-success"> <i class="fal fa-edit"></i> </button>-->
<!--                <button type="button" class="btn btn-sm btn-danger delete-msg"> <i class="fa fa-trash"></i> </button>-->
<!--              </div>-->
<!--            </td>-->
<!--          </tr>-->
<!--          <tr class="odd">-->
<!--            <td class="sorting_1">3</td>-->
<!--            <td>Brielle Williamson </td>-->
<!--            <td>adrissell0@edubl.org</td>-->
<!--            <td>000 0000 000</td>-->
<!--            <td>Selangor</td>-->
<!--            <td>Group1, Group4</td>-->
<!--            <td>-->
<!--              <div class="btn-group btn-group-sm">-->
<!--                <button type="button" data-toggle="modal" data-target="#edit" class="btn btn-sm btn-success"> <i class="fal fa-edit"></i> </button>-->
<!--                <button type="button" class="btn btn-sm btn-danger delete-msg"> <i class="fa fa-trash"></i> </button>-->
<!--              </div>-->
<!--            </td>-->
<!--          </tr>-->
        </tbody>
         {% endif %}
          {%endfor%}
      </table>
    </div>
  </div>
  <!-- admin-details end -->
  </div>
  </div>
  <!-- page-content end -->
  </div>
  <!-- main-content end -->
  </div>
  <!-- Add modal start here -->
  <div class="modal fade bd-example-modal-xl" id="addcustomer">
    <div class="modal-dialog edit-contentdetal modal-xl">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Add Customer Details</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <!-- Modal body -->
        <form class="modal-body" action="/add_email/{{user.id}}" method="post">
          {% csrf_token %}
          <div class="row">
            <div class="newcustomer-modal col-lg-8 col-sm-6 col-12 float-left">
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Customer Name</label>
                <div class="icontext-style autorusult-fm"> <span class="icon-group-addon">
                              <i class="far fa-user-alt"></i>
                            </span>
                  <input type="text" class="form-control" id="name" name="name" placeholder="Enter username"> </div>
              </div>
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Email Id</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-envelope-open-text"></i>
                            </span>
                  <input type="email" class="form-control" name="email" id="email" placeholder="Enter Email"> </div>
              </div>
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Mobile Number</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-phone-alt"></i>
                            </span>
                  <input type="text" class="form-control" name="mobile" id="mobile" placeholder="Enter Contact number"> </div>
              </div>
             
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>State</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-map-marker-alt"></i>
                            </span>
                  <select name="state" id="state" class="form-control selectpicker">
                    <option value="">Select your State</option>
                    <option>Odisha</option>
                    <option>New Delhi</option>
                  </select>
                </div>
              </div>
              
            </div>
            <div class="newcustomer-modal col-lg-4 col-sm-4 col-12 float-left">
              <h4 class="modal-title">Select Group</h4>
              <div class="form-check">
                {% for group in message %}
                {% if group.cid == user.id %}
                <label class="form-check-label" for="check1">
                  <input type="checkbox" class="form-check-input" id="check" name="checks[]" value="{{ group.name }}" >{{ group.name }} </label><br>
                  {% endif %}
                  {% endfor %}
              </div>
<!--              <div class="form-check">-->
<!--                <label class="form-check-label" for="check2">-->
<!--                  <input type="checkbox" class="form-check-input" id="check2" value="Group2">Group 2 </label>-->
<!--              </div>-->
<!--              <div class="form-check">-->
<!--                <label class="form-check-label">-->
<!--                  <input type="checkbox" class="form-check-input" value="Group3">Option 3 </label>-->
<!--              </div>-->
            </div>
          </div>
          <button type="submit" class="btn btn-primary bttn-editcode swalDefaultSuccess">Save<i class="fal fa-arrow-to-right"></i> </button>
        </form>
      </div>
    </div>
  </div>


  <!-- Edit modal start here -->
  <div class="modal fade bd-example-modal-xl" id="edit">
    <div class="modal-dialog edit-contentdetal modal-xl">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Edit Customer Details</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <!-- Modal body -->
        <form class="modal-body">
          <div class="row">
            <div class="newcustomer-modal col-lg-8 col-sm-6 col-12 float-left">
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Customer Name </label>
                <div class="icontext-style autorusult-fm"> <span class="icon-group-addon">
                              <i class="far fa-user-alt"></i>
                            </span>
                  <input type="text" class="form-control" id="names" placeholder="Enter username"> </div>
              </div>
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Email Id</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-envelope-open-text"></i>
                            </span>
                  <input type="text" class="form-control" id="emails" placeholder="Enter Email"> </div>
              </div>
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>Mobile Number</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-phone-alt"></i>
                            </span>
                  <input type="text" class="form-control" id="mobiles" placeholder="Enter Contact number"> </div>
              </div>
              
              <div class="form-group col-lg-6 col-sm-6 col-12 float-left">
                <label>State</label>
                <div class="icontext-style"> <span class="icon-group-addon">
                              <i class="far fa-map-marker-alt"></i>
                            </span>
                  <select name="" class="form-control selectpicker" id="states">
                    <option value="">Select your State</option>
                    <option>Odisha</option>
                    <option>New Delhi</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="newcustomer-modal col-lg-4 col-sm-4 col-12 float-left">
              <h4 class="modal-title">Select Group</h4>
              <div class="form-check">
                {% for group in message %}
                {% if group.cid == user.id %}
                <label class="form-check-label" for="check1">
                  <input type="checkbox" class="form-check-input" id="checks" name="checks[]" value="{{ group.name }}" >{{ group.name }} </label><br>
                  {% endif %}
                  {% endfor %}
              </div>
<!--              <div class="form-check">-->
<!--                <label class="form-check-label" for="check2">-->
<!--                  <input type="checkbox" class="form-check-input" value="Group2">Group 2 </label>-->
<!--              </div>-->
<!--              <div class="form-check">-->
<!--                <label class="form-check-label">-->
<!--                  <input type="checkbox" class="form-check-input" value="Group3">Option 3 </label>-->
<!--              </div>-->
            </div>
          </div>
          <button type="submit" class="btn btn-primary bttn-editcode swalDefaultSucces">Update<i class="fal fa-arrow-to-right"></i> </button>
        </form>
      </div>
    </div>
  </div>

{% include 'client_footer.html' %}
    <!-- JAVASCRIPT -->
    <script type="text/javascript">
    // datatable init. start//
    $(function() {
      $("#clientdeatils").DataTable({
        "responsive": false,
        "lengthChange": true,
        "autoWidth": false,
        "scrollX": true,
      })
    });
    // datatable init. start//
    </script>
    <!-- sweet alert js -->
    <script>
    $(function() {
      var Toast = Swal.mixin({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000
      });
      $('.swalDefaultSuccess').click(function() {
        Toast.fire({
          icon: 'success',
          title: ' Customer Added Successfully.'
        })
      });
      $('.swalDefaultSucces').click(function() {
        Toast.fire({
          icon: 'success',
          title: ' Customer information successfully updated.'
        })
      });
      $('.swalDefaultInfo').click(function() {
        Toast.fire({
          icon: 'info',
          title: 'Customer information successfully updated.'
        })
      });
      $('.swalDefaultError').click(function() {
        Toast.fire({
          icon: 'error',
          title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
        })
      });
      $('.swalDefaultWarning').click(function() {
        Toast.fire({
          icon: 'warning',
          title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
        })
      });
      $('.swalDefaultQuestion').click(function() {
        Toast.fire({
          icon: 'question',
          title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
        })
      });
    });
    </script>
<script>
  function email(val)
      {
        var t = val
        {% for email in messages %}
                x = {{email.id}}
                if (x == t){
                  document.getElementById("names").value="{{email.name}}"
                  document.getElementById("emails").value="{{email.email}}"
                  document.getElementById("mobiles").value="{{email.mobile}}"
                  document.getElementById("states").value="{{email.state}}"
                  document.getElementById("checks").value="{{email.checks}}"
                }
                {% endfor %}
      }

    function test(val)
    {
      var t = val
      Swal.fire({
        title: 'Are you sure?',
        text: "You won't be able to revert this!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
              $.ajax({
                type: "GET",
                url: "{% url 'email_delete' %}" ,
                data:{"value":t},
                success: function () {
                    window.location.reload('/customerlist');
                }});
            }
          });
       }
</script>
